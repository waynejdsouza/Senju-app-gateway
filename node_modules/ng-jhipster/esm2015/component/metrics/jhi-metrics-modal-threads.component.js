/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
 Copyright 2013-2019 the original author or authors from the JHipster project.

 This file is part of the JHipster project, see https://www.jhipster.tech/
 for more information.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
 */
import { Component } from '@angular/core';
import { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';
export class JhiThreadModalComponent {
    /**
     * @param {?} activeModal
     */
    constructor(activeModal) {
        this.activeModal = activeModal;
        this.threadDumpAll = 0;
        this.threadDumpBlocked = 0;
        this.threadDumpRunnable = 0;
        this.threadDumpTimedWaiting = 0;
        this.threadDumpWaiting = 0;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.threadDump.forEach((value) => {
            if (value.threadState === 'RUNNABLE') {
                this.threadDumpRunnable += 1;
            }
            else if (value.threadState === 'WAITING') {
                this.threadDumpWaiting += 1;
            }
            else if (value.threadState === 'TIMED_WAITING') {
                this.threadDumpTimedWaiting += 1;
            }
            else if (value.threadState === 'BLOCKED') {
                this.threadDumpBlocked += 1;
            }
        });
        this.threadDumpAll = this.threadDumpRunnable + this.threadDumpWaiting + this.threadDumpTimedWaiting + this.threadDumpBlocked;
    }
    /**
     * @param {?} threadState
     * @return {?}
     */
    getBadgeClass(threadState) {
        if (threadState === 'RUNNABLE') {
            return 'badge-success';
        }
        else if (threadState === 'WAITING') {
            return 'badge-info';
        }
        else if (threadState === 'TIMED_WAITING') {
            return 'badge-warning';
        }
        else if (threadState === 'BLOCKED') {
            return 'badge-danger';
        }
    }
}
JhiThreadModalComponent.decorators = [
    { type: Component, args: [{
                selector: 'jhi-thread-modal',
                template: `
        <div class="modal-header">
            <h4 class="modal-title" jhiTranslate="metrics.jvm.threads.dump.title">Threads dump</h4>
            <button type="button" class="close" (click)="activeModal.dismiss('closed')">&times;</button>
        </div>
        <div class="modal-body">
            <span class="badge badge-primary" (click)="threadDumpFilter = {}">
                All&nbsp;<span class="badge badge-pill badge-default">{{threadDumpAll}}</span>
            </span>&nbsp;
            <span class="badge badge-success" (click)="threadDumpFilter = {threadState: 'RUNNABLE'}">
                Runnable&nbsp;<span class="badge badge-pill badge-default">{{threadDumpRunnable}}</span>
            </span>&nbsp;
            <span class="badge badge-info" (click)="threadDumpFilter = {threadState: 'WAITING'}">Waiting&nbsp;<span
                class="badge badge-pill badge-default">{{threadDumpWaiting}}</span></span>&nbsp;
            <span class="badge badge-warning" (click)="threadDumpFilter = {threadState: 'TIMED_WAITING'}">
                Timed Waiting&nbsp;<span class="badge badge-pill badge-default">{{threadDumpTimedWaiting}}</span>
            </span>&nbsp;
            <span class="badge badge-danger" (click)="threadDumpFilter = {threadState: 'BLOCKED'}">Blocked&nbsp;<span
                class="badge badge-pill badge-default">{{threadDumpBlocked}}</span></span>&nbsp;
            <div class="mt-2">&nbsp;</div>
            Filter
            <input type="text" [(ngModel)]="threadDumpFilter" class="form-control">
            <div class="pad" *ngFor="let entry of threadDump | pureFilter:threadDumpFilter:'lockName' | keys">
                <h6>
                    <span class="badge" [ngClass]="getBadgeClass(entry.value.threadState)">{{entry.value.threadState}}</span>&nbsp;{{entry.value.threadName}}
                    (ID
                    {{entry.value.threadId}})
                    <a (click)="entry.show = !entry.show" href="javascript:void(0);">
                        <span [hidden]="entry.show" jhiTranslate="metrics.jvm.threads.dump.show">Show StackTrace</span>
                        <span [hidden]="!entry.show" jhiTranslate="metrics.jvm.threads.dump.hide">Hide StackTrace</span>
                    </a>
                </h6>
                <div class="card" [hidden]="!entry.show">
                    <div class="card-body">
                        <div *ngFor="let st of entry.value.stackTrace | keys" class="break">
                            <samp>{{st.value.className}}.{{st.value.methodName}}(<code>{{st.value.fileName}}:{{st.value.lineNumber}}</code>)</samp>
                            <span class="mt-1"></span>
                        </div>
                    </div>
                </div>
                <table class="table table-sm table-responsive">
                    <thead>
                    <tr>
                        <th jhiTranslate="metrics.jvm.threads.dump.blockedtime">Blocked Time</th>
                        <th jhiTranslate="metrics.jvm.threads.dump.blockedcount">Blocked Count</th>
                        <th jhiTranslate="metrics.jvm.threads.dump.waitedtime">Waited Time</th>
                        <th jhiTranslate="metrics.jvm.threads.dump.waitedcount">Waited Count</th>
                        <th jhiTranslate="metrics.jvm.threads.dump.lockname">Lock Name</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>{{entry.value.blockedTime}}</td>
                        <td>{{entry.value.blockedCount}}</td>
                        <td>{{entry.value.waitedTime}}</td>
                        <td>{{entry.value.waitedCount}}</td>
                        <td class="thread-dump-modal-lock" title="{{entry.value.lockName}}">
                            <code>{{entry.value.lockName}}</code></td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary float-left" data-dismiss="modal"
                    (click)="activeModal.dismiss('closed')">Done
            </button>
        </div>`
            }] }
];
/** @nocollapse */
JhiThreadModalComponent.ctorParameters = () => [
    { type: NgbActiveModal }
];
if (false) {
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDumpFilter;
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDump;
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDumpAll;
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDumpBlocked;
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDumpRunnable;
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDumpTimedWaiting;
    /** @type {?} */
    JhiThreadModalComponent.prototype.threadDumpWaiting;
    /** @type {?} */
    JhiThreadModalComponent.prototype.activeModal;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamhpLW1ldHJpY3MtbW9kYWwtdGhyZWFkcy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZy1qaGlwc3Rlci8iLCJzb3VyY2VzIjpbImNvbXBvbmVudC9tZXRyaWNzL2poaS1tZXRyaWNzLW1vZGFsLXRocmVhZHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkEsT0FBTyxFQUFDLFNBQVMsRUFBUyxNQUFNLGVBQWUsQ0FBQztBQUNoRCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUEwRTFELE1BQU0sT0FBTyx1QkFBdUI7Ozs7SUFTaEMsWUFBbUIsV0FBMkI7UUFBM0IsZ0JBQVcsR0FBWCxXQUFXLENBQWdCO1FBTjlDLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLHNCQUFpQixHQUFHLENBQUMsQ0FBQztRQUN0Qix1QkFBa0IsR0FBRyxDQUFDLENBQUM7UUFDdkIsMkJBQXNCLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLHNCQUFpQixHQUFHLENBQUMsQ0FBQztJQUd0QixDQUFDOzs7O0lBRUQsUUFBUTtRQUNKLElBQUksQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDOUIsSUFBSSxLQUFLLENBQUMsV0FBVyxLQUFLLFVBQVUsRUFBRTtnQkFDbEMsSUFBSSxDQUFDLGtCQUFrQixJQUFJLENBQUMsQ0FBQzthQUNoQztpQkFBTSxJQUFJLEtBQUssQ0FBQyxXQUFXLEtBQUssU0FBUyxFQUFFO2dCQUN4QyxJQUFJLENBQUMsaUJBQWlCLElBQUksQ0FBQyxDQUFDO2FBQy9CO2lCQUFNLElBQUksS0FBSyxDQUFDLFdBQVcsS0FBSyxlQUFlLEVBQUU7Z0JBQzlDLElBQUksQ0FBQyxzQkFBc0IsSUFBSSxDQUFDLENBQUM7YUFDcEM7aUJBQU0sSUFBSSxLQUFLLENBQUMsV0FBVyxLQUFLLFNBQVMsRUFBRTtnQkFDeEMsSUFBSSxDQUFDLGlCQUFpQixJQUFJLENBQUMsQ0FBQzthQUMvQjtRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUM7SUFDakksQ0FBQzs7Ozs7SUFFRCxhQUFhLENBQUMsV0FBVztRQUNyQixJQUFJLFdBQVcsS0FBSyxVQUFVLEVBQUU7WUFDNUIsT0FBTyxlQUFlLENBQUM7U0FDMUI7YUFBTSxJQUFJLFdBQVcsS0FBSyxTQUFTLEVBQUU7WUFDbEMsT0FBTyxZQUFZLENBQUM7U0FDdkI7YUFBTSxJQUFJLFdBQVcsS0FBSyxlQUFlLEVBQUU7WUFDeEMsT0FBTyxlQUFlLENBQUM7U0FDMUI7YUFBTSxJQUFJLFdBQVcsS0FBSyxTQUFTLEVBQUU7WUFDbEMsT0FBTyxjQUFjLENBQUM7U0FDekI7SUFDTCxDQUFDOzs7WUE5R0osU0FBUyxTQUFDO2dCQUNQLFFBQVEsRUFBRSxrQkFBa0I7Z0JBQzVCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7ZUFvRUM7YUFDZDs7OztZQXpFTyxjQUFjOzs7O0lBMkVsQixtREFBc0I7O0lBQ3RCLDZDQUFnQjs7SUFDaEIsZ0RBQWtCOztJQUNsQixvREFBc0I7O0lBQ3RCLHFEQUF1Qjs7SUFDdkIseURBQTJCOztJQUMzQixvREFBc0I7O0lBRVYsOENBQWtDIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiBDb3B5cmlnaHQgMjAxMy0yMDE5IHRoZSBvcmlnaW5hbCBhdXRob3Igb3IgYXV0aG9ycyBmcm9tIHRoZSBKSGlwc3RlciBwcm9qZWN0LlxuXG4gVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIEpIaXBzdGVyIHByb2plY3QsIHNlZSBodHRwczovL3d3dy5qaGlwc3Rlci50ZWNoL1xuIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge0NvbXBvbmVudCwgT25Jbml0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7TmdiQWN0aXZlTW9kYWx9IGZyb20gJ0BuZy1ib290c3RyYXAvbmctYm9vdHN0cmFwJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdqaGktdGhyZWFkLW1vZGFsJyxcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XG4gICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiIGpoaVRyYW5zbGF0ZT1cIm1ldHJpY3MuanZtLnRocmVhZHMuZHVtcC50aXRsZVwiPlRocmVhZHMgZHVtcDwvaDQ+XG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgKGNsaWNrKT1cImFjdGl2ZU1vZGFsLmRpc21pc3MoJ2Nsb3NlZCcpXCI+JnRpbWVzOzwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtcHJpbWFyeVwiIChjbGljayk9XCJ0aHJlYWREdW1wRmlsdGVyID0ge31cIj5cbiAgICAgICAgICAgICAgICBBbGwmbmJzcDs8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXBpbGwgYmFkZ2UtZGVmYXVsdFwiPnt7dGhyZWFkRHVtcEFsbH19PC9zcGFuPlxuICAgICAgICAgICAgPC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZSBiYWRnZS1zdWNjZXNzXCIgKGNsaWNrKT1cInRocmVhZER1bXBGaWx0ZXIgPSB7dGhyZWFkU3RhdGU6ICdSVU5OQUJMRSd9XCI+XG4gICAgICAgICAgICAgICAgUnVubmFibGUmbmJzcDs8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLXBpbGwgYmFkZ2UtZGVmYXVsdFwiPnt7dGhyZWFkRHVtcFJ1bm5hYmxlfX08L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLWluZm9cIiAoY2xpY2spPVwidGhyZWFkRHVtcEZpbHRlciA9IHt0aHJlYWRTdGF0ZTogJ1dBSVRJTkcnfVwiPldhaXRpbmcmbmJzcDs8c3BhblxuICAgICAgICAgICAgICAgIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtcGlsbCBiYWRnZS1kZWZhdWx0XCI+e3t0aHJlYWREdW1wV2FpdGluZ319PC9zcGFuPjwvc3Bhbj4mbmJzcDtcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2Utd2FybmluZ1wiIChjbGljayk9XCJ0aHJlYWREdW1wRmlsdGVyID0ge3RocmVhZFN0YXRlOiAnVElNRURfV0FJVElORyd9XCI+XG4gICAgICAgICAgICAgICAgVGltZWQgV2FpdGluZyZuYnNwOzxzcGFuIGNsYXNzPVwiYmFkZ2UgYmFkZ2UtcGlsbCBiYWRnZS1kZWZhdWx0XCI+e3t0aHJlYWREdW1wVGltZWRXYWl0aW5nfX08L3NwYW4+XG4gICAgICAgICAgICA8L3NwYW4+Jm5ic3A7XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImJhZGdlIGJhZGdlLWRhbmdlclwiIChjbGljayk9XCJ0aHJlYWREdW1wRmlsdGVyID0ge3RocmVhZFN0YXRlOiAnQkxPQ0tFRCd9XCI+QmxvY2tlZCZuYnNwOzxzcGFuXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJiYWRnZSBiYWRnZS1waWxsIGJhZGdlLWRlZmF1bHRcIj57e3RocmVhZER1bXBCbG9ja2VkfX08L3NwYW4+PC9zcGFuPiZuYnNwO1xuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm10LTJcIj4mbmJzcDs8L2Rpdj5cbiAgICAgICAgICAgIEZpbHRlclxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgWyhuZ01vZGVsKV09XCJ0aHJlYWREdW1wRmlsdGVyXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYWRcIiAqbmdGb3I9XCJsZXQgZW50cnkgb2YgdGhyZWFkRHVtcCB8IHB1cmVGaWx0ZXI6dGhyZWFkRHVtcEZpbHRlcjonbG9ja05hbWUnIHwga2V5c1wiPlxuICAgICAgICAgICAgICAgIDxoNj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJiYWRnZVwiIFtuZ0NsYXNzXT1cImdldEJhZGdlQ2xhc3MoZW50cnkudmFsdWUudGhyZWFkU3RhdGUpXCI+e3tlbnRyeS52YWx1ZS50aHJlYWRTdGF0ZX19PC9zcGFuPiZuYnNwO3t7ZW50cnkudmFsdWUudGhyZWFkTmFtZX19XG4gICAgICAgICAgICAgICAgICAgIChJRFxuICAgICAgICAgICAgICAgICAgICB7e2VudHJ5LnZhbHVlLnRocmVhZElkfX0pXG4gICAgICAgICAgICAgICAgICAgIDxhIChjbGljayk9XCJlbnRyeS5zaG93ID0gIWVudHJ5LnNob3dcIiBocmVmPVwiamF2YXNjcmlwdDp2b2lkKDApO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gW2hpZGRlbl09XCJlbnRyeS5zaG93XCIgamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLnNob3dcIj5TaG93IFN0YWNrVHJhY2U8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBbaGlkZGVuXT1cIiFlbnRyeS5zaG93XCIgamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLmhpZGVcIj5IaWRlIFN0YWNrVHJhY2U8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2g2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkXCIgW2hpZGRlbl09XCIhZW50cnkuc2hvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBzdCBvZiBlbnRyeS52YWx1ZS5zdGFja1RyYWNlIHwga2V5c1wiIGNsYXNzPVwiYnJlYWtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2FtcD57e3N0LnZhbHVlLmNsYXNzTmFtZX19Lnt7c3QudmFsdWUubWV0aG9kTmFtZX19KDxjb2RlPnt7c3QudmFsdWUuZmlsZU5hbWV9fTp7e3N0LnZhbHVlLmxpbmVOdW1iZXJ9fTwvY29kZT4pPC9zYW1wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibXQtMVwiPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1zbSB0YWJsZS1yZXNwb25zaXZlXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRyPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGpoaVRyYW5zbGF0ZT1cIm1ldHJpY3MuanZtLnRocmVhZHMuZHVtcC5ibG9ja2VkdGltZVwiPkJsb2NrZWQgVGltZTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLmJsb2NrZWRjb3VudFwiPkJsb2NrZWQgQ291bnQ8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGpoaVRyYW5zbGF0ZT1cIm1ldHJpY3MuanZtLnRocmVhZHMuZHVtcC53YWl0ZWR0aW1lXCI+V2FpdGVkIFRpbWU8L3RoPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoIGpoaVRyYW5zbGF0ZT1cIm1ldHJpY3MuanZtLnRocmVhZHMuZHVtcC53YWl0ZWRjb3VudFwiPldhaXRlZCBDb3VudDwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGggamhpVHJhbnNsYXRlPVwibWV0cmljcy5qdm0udGhyZWFkcy5kdW1wLmxvY2tuYW1lXCI+TG9jayBOYW1lPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3tlbnRyeS52YWx1ZS5ibG9ja2VkVGltZX19PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57e2VudHJ5LnZhbHVlLmJsb2NrZWRDb3VudH19PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZD57e2VudHJ5LnZhbHVlLndhaXRlZFRpbWV9fTwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dGQ+e3tlbnRyeS52YWx1ZS53YWl0ZWRDb3VudH19PC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInRocmVhZC1kdW1wLW1vZGFsLWxvY2tcIiB0aXRsZT1cInt7ZW50cnkudmFsdWUubG9ja05hbWV9fVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjb2RlPnt7ZW50cnkudmFsdWUubG9ja05hbWV9fTwvY29kZT48L3RkPlxuICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeSBmbG9hdC1sZWZ0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIlxuICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwiYWN0aXZlTW9kYWwuZGlzbWlzcygnY2xvc2VkJylcIj5Eb25lXG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+YFxufSlcbmV4cG9ydCBjbGFzcyBKaGlUaHJlYWRNb2RhbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgdGhyZWFkRHVtcEZpbHRlcjogYW55O1xuICAgIHRocmVhZER1bXA6IGFueTtcbiAgICB0aHJlYWREdW1wQWxsID0gMDtcbiAgICB0aHJlYWREdW1wQmxvY2tlZCA9IDA7XG4gICAgdGhyZWFkRHVtcFJ1bm5hYmxlID0gMDtcbiAgICB0aHJlYWREdW1wVGltZWRXYWl0aW5nID0gMDtcbiAgICB0aHJlYWREdW1wV2FpdGluZyA9IDA7XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgYWN0aXZlTW9kYWw6IE5nYkFjdGl2ZU1vZGFsKSB7XG4gICAgfVxuXG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMudGhyZWFkRHVtcC5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbHVlLnRocmVhZFN0YXRlID09PSAnUlVOTkFCTEUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJlYWREdW1wUnVubmFibGUgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUudGhyZWFkU3RhdGUgPT09ICdXQUlUSU5HJykge1xuICAgICAgICAgICAgICAgIHRoaXMudGhyZWFkRHVtcFdhaXRpbmcgKz0gMTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUudGhyZWFkU3RhdGUgPT09ICdUSU1FRF9XQUlUSU5HJykge1xuICAgICAgICAgICAgICAgIHRoaXMudGhyZWFkRHVtcFRpbWVkV2FpdGluZyArPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZS50aHJlYWRTdGF0ZSA9PT0gJ0JMT0NLRUQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aHJlYWREdW1wQmxvY2tlZCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRocmVhZER1bXBBbGwgPSB0aGlzLnRocmVhZER1bXBSdW5uYWJsZSArIHRoaXMudGhyZWFkRHVtcFdhaXRpbmcgKyB0aGlzLnRocmVhZER1bXBUaW1lZFdhaXRpbmcgKyB0aGlzLnRocmVhZER1bXBCbG9ja2VkO1xuICAgIH1cblxuICAgIGdldEJhZGdlQ2xhc3ModGhyZWFkU3RhdGUpIHtcbiAgICAgICAgaWYgKHRocmVhZFN0YXRlID09PSAnUlVOTkFCTEUnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2JhZGdlLXN1Y2Nlc3MnO1xuICAgICAgICB9IGVsc2UgaWYgKHRocmVhZFN0YXRlID09PSAnV0FJVElORycpIHtcbiAgICAgICAgICAgIHJldHVybiAnYmFkZ2UtaW5mbyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhyZWFkU3RhdGUgPT09ICdUSU1FRF9XQUlUSU5HJykge1xuICAgICAgICAgICAgcmV0dXJuICdiYWRnZS13YXJuaW5nJztcbiAgICAgICAgfSBlbHNlIGlmICh0aHJlYWRTdGF0ZSA9PT0gJ0JMT0NLRUQnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2JhZGdlLWRhbmdlcic7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXX0=